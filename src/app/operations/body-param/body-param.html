<div class="tab-header">
  <div class="tab-select"
       (click)="showJson = false"
       [ngClass]="{'active': !showJson}">
    Form
  </div>
  <div class="tab-select"
       (click)="showJson = true"
       [ngClass]="{'active': showJson}">
    Json
  </div>
</div>
<div class="tab-body" *ngIf="showJson">
  <textarea class="form-control"
            autocomplete="off"
            autocorrect="off"
            autocapitalize="off"
            spellcheck="false"
            [rows]="parametersJson.split('\n').length"
            [value]="parametersJson"
            (input)="onJsonChange($event.target.value)"
  ></textarea>
  <div class="json-error color-danger" *ngIf="errorMessage">{{errorMessage}}</div>
</div>
<div class="tab-body" *ngIf="!showJson">
  <div class="json-example">
    <ng-container *ngFor="let parameter of parameters" >
      <ng-container *ngFor="let property of getParameterProperties(parameter)">
        <div class="json-entry">
          <div class="json-label">
            <div class="json-key">
              {{property.name}}:
            </div>
            <div class="json-type">
              <code class="parameter-type {{property.type || property.schema && 'object'}}">
            {{property.type ||
              property.schema && property.schema.type ||
              property.name + ' schema' }}
              </code>
            </div>
          </div>
          <div class="json-value" >
            <div class="json-description"
                 *ngIf="getParameterType(property) !== 'string' && property.description">
              {{property.description}}
            </div>
            <input
              type="text"
              class="form-control"
              [placeholder]="property.description"
              *ngIf="getParameterType(property) === 'string'">
            <input
              type="number"
              step="any"
              class="form-control"
              placeholder="Number"
              *ngIf="getParameterType(property) === 'number'">
            <span class="btn-group json-object-prop"
                  *ngIf="getParameterType(property) === 'boolean'">
              <button type="button" class="btn btn-outline">true</button>
              <button type="button" class="btn btn-outline">false</button>
            </span>
            <div class="json-object-prop" *ngIf="getParameterType(property) === 'array'">
              <button type="button" class="btn btn-outline">
                +
              </button>
            </div>
            <op-body-param-details 
              [parameter]="property"
              *ngIf="getParameterType(property) === 'object'">
            </op-body-param-details>
          </div>
        </div>
      </ng-container>
    </ng-container>
  </div>
</div>
